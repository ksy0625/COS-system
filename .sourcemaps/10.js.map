{"version":3,"sources":["../../src/pages/convey/place-in-tote/place-in-tote.module.ts","../../src/pages/convey/place-in-tote/place-in-tote.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PlaceInTotePage } from './place-in-tote';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    PlaceInTotePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PlaceInTotePage),\n    TranslateModule.forChild(),\n  ],\n})\nexport class PlacInTotePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/convey/place-in-tote/place-in-tote.module.ts","import { Component , ViewChild} from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n\nimport {MobileAppSystem} from '../../../providers/mobile.app.system'\nimport {User} from '../../../providers/user'\nimport {ModalService} from '../../../providers/modal.service'\nimport {AlertService} from '../../../providers/alert.service'\n\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { CustomKeyBoard } from '../../../components/customKeyBoard/custom-keyboard';\n\n/**\n * Generated class for the PlacInTotePage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\nexport class Product{\n\trowId:number;\n\tbinLocation:string;\n\tstockCode:string;\n}\n\nexport class ProductOrder extends Product{\n\tpickQty:number;\n\tconfirmQty:number;\n}\n\n\n@IonicPage()\n@Component({\n  selector: 'page-place-in-tote',\n  templateUrl: 'place-in-tote.html',\n})\nexport class PlaceInTotePage {\n\n  @ViewChild('toteBarCodeInputBox') toteBarCodeInput ;\n\n  productOrderList:ProductOrder[] = [];\n  toteBarcode:string = '';  \n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n  \t\t\t  public mobileAppSystem:MobileAppSystem,\n          private keyboard:Keyboard,\n  \t    \tprivate modalService:ModalService,\n  \t    \tprivate alertService:AlertService, \n  \t\t\t  public user:User) {\n    \n    if(this.user.orderInfo.toteNumber)\n  \t  this.toteBarcode = this.user.orderInfo.toteNumber;\n    CustomKeyBoard.hide();\n    this.timerTick();\n  }\n\n\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad PlacInTotePage');\n    let svc = this;\n    this.mobileAppSystem.getProductListNotInTote(this.user.orderInfo.orderBarcode, this.user.orderInfo.zone, function(res:any){\n    \tif(res!=null)\n    \t\tsvc.productOrderList = res.result.productList;\n    \t\n    \tsvc.selectToteBarcodeInput();\n    });\n  }\n\n  openPage() {\n  \tif(this.toteBarcode=='')return;\n\n  \tlet svc = this;\n  \tlet productList: Product[] = [];\n\n  \tif(this.productOrderList != null)\n  \t{\n\t\tfor(var productOrder of this.productOrderList) {\n\t\t\tproductList.push({rowId: productOrder.rowId, binLocation: productOrder.binLocation, stockCode: productOrder.stockCode});\n\t\t}  \t\t\n  \t}\n\n  \t//let productList;\n\tthis.mobileAppSystem.placeInTote(this.user.orderInfo.orderBarcode, \n\t\tthis.toteBarcode, this.user.orderInfo.zone, productList, function(res:any){\n\t\tif(res==null)\n\t\t\treturn;\n\n\t\tif(res.result.orderComplete == 'Y')\n\t\t{\n\t\t\tsvc.onOrderComplete();\n\t\t}\n\t\telse if(res.result.orderComplete == 'N')\n\t\t{\n      if(res.result.statusMsg !='')\n        svc.alertService.doAlert('Error', res.result.statusMsg, 'OK');\n      \n      svc.navCtrl.popTo('ScanOrderPage');\n      svc.navCtrl.push('ScanProductPage');\n/*      \n\t\t\tsvc.alertService.doConfirm('Error', res.result.statusMsg, 'OK', 'NO').then(function(yes:any){\n\t\t\t\tif(yes==true)\n\t\t\t\t{\n\t\t\t\t\tsvc.allocateNewToteToOrder();\t\n\t\t\t\t}\n\t\t\t});\t\n*/      \n\t\t}\n\t});\n  \t//this.navCtrl.push('OrderStatusPage');\n  }\n\n\n  private allocateNewToteToOrder()\n  {\n  \tif(this.toteBarcode=='')return;\n\n  \tlet svc = this;\n  \tlet productList: Product[] = [];\n\n\tfor(var productOrder of this.productOrderList) {\n\t\tproductList.push({rowId: productOrder.rowId, binLocation: productOrder.binLocation, stockCode: productOrder.stockCode});\n\t}\n\n  \t//let productList;\n\tthis.mobileAppSystem.allocateNewToteToOrder(this.user.orderInfo.orderBarcode, \n\t\tthis.toteBarcode, this.user.orderInfo.zone, productList, function(res:any){\n\t\tif(res==null)return;\n\t\tif(res.result==null)return;\n\t\t\t\n\t\tif(res.result.orderComplete == 'Y')\n\t\t{\n\t\t\tsvc.onOrderComplete();\n\t\t}\n\t\telse if(res.result.orderComplete == 'N')\n\t\t{\n\t\t\t//svc.onOrderComplete();\n      this.navCtrl.popTo('ScanOrderPage');\n\t\t\tsvc.navCtrl.push('ScanProductPage');\n\t\t}\n\t});  \t\n  }\n\n  private onOrderComplete()\n  {\n  \tthis.alertService.doAlert('Order Complete!', '', 'OK');  \t\n\t  //this.modalService.doAlert('Order Complete!', '', 'OK',  'secondary', 'checkmark-circle');    \n\n    this.user.orderInfo.clear();\n    this.navCtrl.popTo('HomeScreenPage');\n\t  this.navCtrl.push('ScanOrderPage');\n  } \n\n  selectToteBarcodeInput()\n  {\n    setTimeout(() => {\n      this.toteBarCodeInput.setFocus();\n    },500); //a least 150ms.\n  }\n  onChangedToteBarcode(val:any)\n  {    \n    let svc = this;\n    if(val==null || val=='')\n      return;\n    this.openPage();\n  }\n\n\n  timerTick()\n  {\n    let svc = this;\n    setTimeout(() => {\n      if(this.navCtrl.getActive().component.name !=\"PlaceInTotePage\" ||  this.mobileAppSystem.isBusy()==true)\n      {\n        this.timerTick();\n        return;\n      }  \n\n      if(this.keyboard.close != null)\n        this.keyboard.close();\n\n      if(this.toteBarCodeInput._isFocus ==false)          \n      {\n         this.toteBarCodeInput._readonly = true;\n         this.toteBarCodeInput.setFocus(); \n         this.toteBarCodeInput._readonly = false;\n      }\n        \n\n      svc.timerTick();\n\n    },100); //a least 150ms.\n  }\n\n  onShowKeyPad()\n  {\n    let svc = this;\n    if(CustomKeyBoard.isVisible())\n       CustomKeyBoard.hide();\n    else\n    {\n      CustomKeyBoard.show();    \n      CustomKeyBoard.setTarget(this.toteBarCodeInput, function(val:string){\n        svc.onChangedToteBarcode(val);\n      });      \n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/convey/place-in-tote/place-in-tote.ts"],"sourceRoot":""}