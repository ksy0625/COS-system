{"version":3,"sources":["../../src/pages/p2l/p2l-scan-1stlabel/p2l-scan-1stlabel.module.ts","../../src/pages/p2l/p2l-scan-1stlabel/p2l-scan-1stlabel.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { P2lScan1stlabelPage } from './p2l-scan-1stlabel';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    P2lScan1stlabelPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(P2lScan1stlabelPage),\n    TranslateModule.forChild(),\n  ],\n})\nexport class ScanProductPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/p2l/p2l-scan-1stlabel/p2l-scan-1stlabel.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { Platform } from 'ionic-angular';\nimport {MobileAppSystemP2l} from '../../../providers/mobile.app.system.p2l'\nimport {User} from '../../../providers/user'\nimport {AlertService} from '../../../providers/alert.service'\nimport {ModalService} from '../../../providers/modal.service'\nimport { CustomKeyBoard } from '../../../components/customKeyBoard/custom-keyboard';\n\n/**\n * Generated class for the ScanProductPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\nexport class ProductInfo{\n  countProductScanned:number = 0;\n  countTotalProducts:number = 0;\n\n  jobID:number=0;  \n  binLocation:string = '';\n  description:string= '';\n  img_url:string= '';\n  jobComplete:number=0;\n  pickQty:number=0;\n  pickUnit:string= '';\n  stockCode:string= '';\n}\n\n\n@IonicPage()\n@Component({\n  selector: 'page-p2l-scan-1stlabel',\n  templateUrl: 'p2l-scan-1stlabel.html'\n})\nexport class P2lScan1stlabelPage {\n  @ViewChild('barCodeInputBox') barCodeInput;\n\n  private productBarCode:string = '';\n  private titleDefault :string; \n  private title :string;\n  private productInfo: ProductInfo;\n\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams, \n              private keyboard:Keyboard,\n              private platform: Platform,\n              public mobileAppSystem:MobileAppSystemP2l,\n              private modalService:ModalService,\n              public translateService:TranslateService, public user:User, private alertService:AlertService) {\n    this.title = '';\n    this.titleDefault = '';\n    this.productInfo = new  ProductInfo();\n\n    let svc = this;\n    translateService.get('SCAN_1ST_TITLE').subscribe(\n      value => {\n        svc.titleDefault = value;\n      }\n    ); \n\n    //init display\n    this.getNext1stLabel();\n\n    CustomKeyBoard.hide();\n    this.timerTick();\n  }\n\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ScanProductPage');\n  }\n\n\nprivate getNext1stLabel()\n{\n  let svc = this;\n  this.mobileAppSystem.p2l_getNext1stLabel(this.user.p2linfo.jobID, function(res:any){\n    if(res==null || res.result==null)return;\n    svc.productInfo = res.result;\n    svc.title = svc.titleDefault + \" : \" + svc.productInfo.countProductScanned + \" of \" + svc.productInfo.countTotalProducts + \" done\";        \n  });\n}\n\n\nonChangedProductBarCode(val:any)\n{\n  if(val =='')return;\n  this.productBarCode =  val;\n  let svc = this;     \n\n  this.mobileAppSystem.p2l_validate1stLabel(this.user.p2linfo.jobID, this.user.sessionInfo.userWarehouse, this.productInfo.stockCode, this.productBarCode, function(res:any){\n    if(res==null || res.result==null) return;\n\n    if(res.result.statusCode != 200)\n    {   \n        svc.productBarCode = '';\n        svc.alertService.doAlert('Error', res.result.statusMsg, 'OK' ).then(function(yes){\n        });\n    }\n    else\n    {\n        svc.user.p2linfo.p2lBarcode = val;\n        svc.navCtrl.setRoot('P2lScanProductPage');\n    }\n  });\n}\n\n  timerTick()\n  {\n    let svc = this;\n    setTimeout(() => {\n\n      if(this.navCtrl.getActive().id !=\"P2lScan1stlabelPage\"  || this.mobileAppSystem.isBusy()==true)\n      {\n        this.timerTick();\n        return;\n      }\n\n      let visibleKeypad = CustomKeyBoard.isVisible();            \n\n      if (svc.platform.is('cordova'))\n       svc.keyboard.close();\n\n     if(visibleKeypad==false )\n     {\n       if(svc.barCodeInput._isFocus ==false)\n       {\n         this.barCodeInput._readonly = true;\n         this.barCodeInput.setFocus(); \n         setTimeout(() =>{\n           svc.barCodeInput._readonly = false;\n         }, 40);         \n       }               \n     }\n     svc.timerTick();\n\n    },100); //a least 150ms.\n  }\n\n\n  onShowKeyPad()\n  {\n    let svc = this;\n    if(CustomKeyBoard.isVisible())\n       CustomKeyBoard.hide();\n    else\n    {\n      CustomKeyBoard.show();    \n      CustomKeyBoard.setTarget(this.barCodeInput, function(val:string){\n        svc.onChangedProductBarCode(val);\n      });\n    }\n  }\n\n  hideKeyboard()\n  {    \n    CustomKeyBoard.hide();\n  }\n\n  openPage()\n  {\n    this.onChangedProductBarCode(this.productBarCode);\n  }\n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/p2l/p2l-scan-1stlabel/p2l-scan-1stlabel.ts"],"sourceRoot":""}